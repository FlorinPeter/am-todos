
> am-todos@0.1.0 test:coverage
> vitest run --coverage


 RUN  v3.2.4 /root/am-todos
      Coverage enabled with v8

 ✓ src/components/__tests__/AIChat.test.tsx (26 tests) 3750ms
   ✓ AIChat Component > Checkpoint Functionality > truncates long descriptions in checkpoint creation  529ms
 ✓ src/components/__tests__/GitHubSettings.test.tsx (12 tests) 974ms
   ✓ GitSettings - Basic Feature Coverage > GitHub Integration Configuration > handles input changes correctly  592ms
 ✓ src/components/__tests__/GitSettings.focused.test.tsx (31 tests) 1531ms
 ✓ src/__tests__/App.test.tsx (28 tests) 626ms
 ✓ src/components/__tests__/TodoEditor.test.tsx (12 tests) 487ms
 ✓ src/__tests__/FeatureValidation.test.ts (34 tests) 369ms
 ✓ src/services/__tests__/gitlabService.test.ts (12 tests) 1020ms
   ✓ GitLab Service > getTodos > should handle network errors with retry  1003ms
 ✓ src/__tests__/ComponentTests.test.tsx (18 tests) 489ms
 ✓ src/components/__tests__/MarkdownViewer.test.tsx (19 tests) 790ms
 ✓ src/components/__tests__/MarkdownViewer.draft.test.tsx (14 tests) 560ms
 ✓ src/components/__tests__/AIChat.chatPersistence.test.tsx (15 tests) 448ms
 ✓ src/components/__tests__/NewTodoInput.test.tsx (11 tests) 654ms
 ✓ src/__tests__/BasicFeatureCoverage.test.tsx (17 tests) 327ms
 ✓ src/__tests__/ComponentBasics.test.tsx (26 tests) 398ms
 ✓ src/__tests__/TitleEditingFeature.test.tsx (11 tests) 501ms
 ✓ src/components/__tests__/TodoSidebar.test.tsx (13 tests) 312ms
 ✓ src/components/__tests__/GitHistory.test.tsx (8 tests) 442ms
 ✓ src/components/__tests__/VersionInfo.focused.test.tsx (18 tests) 291ms
 ✓ src/components/__tests__/ProjectManager.test.tsx (15 tests) 429ms
 ✓ src/components/__tests__/SettingsSharing.test.tsx (10 tests) 239ms
 ✓ src/components/__tests__/TodoList.test.tsx (11 tests) 223ms
 ✓ src/components/__tests__/PrioritySelector.test.tsx (10 tests) 199ms
 ✓ src/components/__tests__/TodoEditor.draft.test.tsx (12 tests) 171ms
 ✓ src/App.test.tsx (4 tests) 146ms
 ✓ src/components/__tests__/CheckpointEdgeCases.test.tsx (10 tests) 104ms
 ✓ src/services/__tests__/githubService.simple.test.ts (18 tests) 67ms
 ✓ src/services/__tests__/gitService.complete.test.ts (23 tests) 46ms
 ✓ src/services/__tests__/githubService.test.ts (29 tests) 28ms
 ✓ src/utils/__tests__/localStorage.test.ts (47 tests) 30ms
 ✓ src/services/__tests__/githubService.focused.test.ts (8 tests) 30ms
 ✓ src/services/__tests__/gitlabService.additional.test.ts (8 tests) 33ms
 ✓ src/services/__tests__/gitlabService.metadata.test.ts (6 tests) 26ms
 ✓ src/services/__tests__/gitService.simple.test.ts (22 tests) 29ms
 ✓ src/services/__tests__/gitlabService.focused.test.ts (8 tests) 19ms
 ✓ src/services/__tests__/gitService.createFolder.test.ts (9 tests) 23ms
 ✓ src/services/__tests__/githubService.patterns.test.ts (5 tests) 21ms
 ✓ src/services/__tests__/gitlabService.integration.test.ts (12 tests) 22ms
 ✓ src/services/__tests__/aiService.focused.test.ts (7 tests) 30ms
 ✓ src/services/__tests__/gitlabService.simple.test.ts (16 tests) 27ms
 ✓ src/__tests__/ProgressBarSequencing.test.tsx (5 tests) 8ms
 ✓ src/utils/__tests__/markdown.test.ts (13 tests) 25ms
 ✓ src/__tests__/TodoCreationCollisions.test.tsx (10 tests) 17ms
 ✓ src/services/__tests__/aiService.integration.test.ts (17 tests) 21ms
 ✓ src/services/__tests__/gitService.listFolders.test.ts (4 tests) 18ms
 ✓ src/__tests__/SelectionPreservation.test.tsx (8 tests) 20ms
 ✓ src/services/__tests__/gitService.test.ts (13 tests) 16ms
 ✓ src/__tests__/TodoRenamingWorkflow.test.tsx (5 tests) 11ms
 ✓ src/utils/__tests__/localStorage.chatSession.test.ts (22 tests) 16ms
 ✓ src/__tests__/TitleEditingIntegration.test.tsx (10 tests) 18ms
 ✓ src/utils/__tests__/localStorage.draft.test.ts (21 tests) 14ms
 ✓ src/utils/__tests__/logger.simple.test.ts (5 tests) 17ms
 ✓ src/__tests__/TaskCreationProgressBar.test.tsx (12 tests) 11ms
 ✓ src/__tests__/TodoRenaming.test.tsx (11 tests) 12ms
 ✓ src/__tests__/DuplicateTitleBugFix.test.tsx (4 tests) 10ms
 ✓ src/services/__tests__/aiService.test.ts (5 tests) 8ms
 ✓ src/__tests__/ProgressBarCalculation.test.tsx (10 tests) 13ms
 ✓ src/__tests__/SelectedTodoPersistence.test.tsx (8 tests) 8ms
 ✓ src/utils/__tests__/dateFormat.test.ts (7 tests) 7ms

⎯⎯⎯⎯⎯⎯ Failed Suites 2 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  src/services/__tests__/versionService.targeted.test.ts [ src/services/__tests__/versionService.targeted.test.ts ]
Error: [vitest] There was an error when mocking a module. If you are using "vi.mock" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock
 ❯ src/services/versionService.ts:1:1
      1| import logger from '../utils/logger';
       | ^
      2| 
      3| export interface VersionInfo {

Caused by: ReferenceError: Cannot access 'mockLogger' before initialization
 ❯ src/services/__tests__/versionService.targeted.test.ts:10:12
 ❯ src/services/versionService.ts:1:1

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/2]⎯

 FAIL  src/utils/__tests__/localStorage.compressed.test.ts [ src/utils/__tests__/localStorage.compressed.test.ts ]
Error: [vitest] There was an error when mocking a module. If you are using "vi.mock" factory, make sure there are no top level variables inside, since this call is hoisted to top of the file. Read more: https://vitest.dev/api/vi.html#vi-mock
 ❯ src/utils/localStorage.ts:1:1
      1| import logger from './logger';
       | ^
      2| 
      3| interface GitHubSettings {

Caused by: ReferenceError: Cannot access 'mockLogger' before initialization
 ❯ src/utils/__tests__/localStorage.compressed.test.ts:10:12
 ❯ src/utils/localStorage.ts:1:1

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/2]⎯


 Test Files  2 failed | 58 passed (60)
      Tests  805 passed (805)
   Start at  13:29:33
   Duration  99.26s (transform 1.82s, setup 7.59s, collect 10.05s, tests 16.18s, environment 37.46s, prepare 9.16s)

